# ๐ ะกะะกะขะะะ ะฃะะะะะะะะะฏ ะะะกะะะะะขะะซะะ ะขะะะกะ
## ๐ ะะะะกะะะะ ะะะะะะขะ
ะะฝะพะณะพะฟะพัะพัะฝะฐั ัะธะผัะปััะธั ัะฐะฑะพัั ะฟะฐัะบะฐ ะฑะตัะฟะธะปะพัะฝัั ัะฐะบัะธ ะฒ ะณะพัะพะดะต. ะัะพะตะบั ัะตะฐะปะธะทะพะฒะฐะฝ ะฝะฐ Java ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะพะฒัะตะผะตะฝะฝัั ะฟะพะดัะพะดะพะฒ ะบ ะผะฝะพะณะพะฟะพัะพัะฝะพะผั ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั. ะัะต ัะฐะบัะธ ัะฐะฑะพัะฐัั ะฒ ะพัะดะตะปัะฝัั ะฟะพัะพะบะฐั, ะดะธัะฟะตััะตั ัะฐัะฟัะตะดะตะปัะตั ะทะฐะบะฐะทั, ะณะตะฝะตัะฐัะพั ัะพะทะดะฐะตั ะทะฐะฟัะพัั ะพั ะบะปะธะตะฝัะพะฒ โ ะฟะพะปะฝัะน ัะธะบะป ัะฐะฑะพัั ัะฐะบัะธ-ัะตัะฒะธัะฐ!

## โจ ะะกะะะะะะะกะขะ ะ ะะะะะะะะะกะขะ
โ ะะะะะะฆะะะะะฏ ะกะะะฃะะฏะฆะะฏ โ ะพั ะณะตะฝะตัะฐัะธะธ ะทะฐะบะฐะทะฐ ะดะพ ะทะฐะฒะตััะตะฝะธั ะฟะพะตะทะดะบะธ

โ ะะะะะะะะขะะงะะะกะขะฌ โ ะบะฐะถะดะพะต ัะฐะบัะธ ัะฐะฑะพัะฐะตั ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต

โ ะะะะะซะ ะกะขะะะขะะะะ โ 2 ะฐะปะณะพัะธัะผะฐ ัะฐัะฟัะตะดะตะปะตะฝะธั ะทะฐะบะฐะทะพะฒ

โ ะขะะ ะะะะกะกะ ะขะะะกะ โ ECONOMY, COMFORT, BUSINESS ั ัะฐะทะฝัะผะธ ัะฐัะธัะฐะผะธ

โ ะะะะะะะะะฏ ะกะขะะขะะกะขะะะ โ ะฟะพะปะฝัะน ะพััะตั ะฟะพ ัะฐะฑะพัะต ัะธััะตะผั

โ ะะะะะะะขะะะ ะะะะะะจะะะะ โ graceful shutdown ั poison pills

โ ะะะกะขะะะะะะะะะกะขะฌ โ ะฒัะต ะฟะฐัะฐะผะตััั ัะธะผัะปััะธะธ ะณะธะฑะบะพ ะฝะฐัััะฐะธะฒะฐัััั

## ๐๏ธ ะะะฅะะขะะะขะฃะะ ะะะะะะขะ
### ๐ ะกะขะะฃะะขะฃะะ ะะะะะ
```text
AutoCityTaxi/
โโโ src/                    # ะััะพะดะฝัะน ะบะพะด
โ   โโโ Main.java          # ๐ฎ ะะปะฐะฒะฝัะน ะบะปะฐัั
โ   โโโ models/            # ๐ ะะพะดะตะปะธ ะดะฐะฝะฝัั
โ   โ   โโโ Point.java            # ๐ ะะพะพัะดะธะฝะฐัั
โ   โ   โโโ TaxiType.java         # ๐ ะขะธะฟั ัะฐะบัะธ
โ   โ   โโโ RideRequest.java      # ๐ ะะฐะบะฐะท ะฝะฐ ะฟะพะตะทะดะบั
โ   โ   โโโ RideStatus.java       # ๐ ะกัะฐััั ะฟะพะตะทะดะบะธ
โ   โ   โโโ TaxiStatus.java       # ๐ฆ ะกัะฐััั ัะฐะบัะธ
โ   โ   โโโ TaxiSnapshot.java     # ๐ธ ะกะฝะธะผะพะบ ัะพััะพัะฝะธั
โ   โโโ services/          # โ๏ธ ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โโโ TaxiWorker.java       # ๐ท ะะพัะพะบ ัะฐะบัะธ
โ   โ   โโโ Dispatcher.java       # ๐ฏ ะะธัะฟะตััะตั
โ   โ   โโโ DispatchStrategy.java # ๐ง ะะฝัะตััะตะนั ัััะฐัะตะณะธะธ
โ   โ   โโโ NearestTaxiStrategy.java  # ๐บ๏ธ ะะปะธะถะฐะนัะตะต ัะฐะบัะธ
โ   โ   โโโ LeastLoadedTaxiStrategy.java # โ๏ธ ะะฐะธะผะตะฝะตะต ะทะฐะณััะถะตะฝะฝะพะต
โ   โโโ infra/            # ๐๏ธ ะะฝััะฐััััะบัััะฐ
โ   โ   โโโ SimulationConfig.java  # โ๏ธ ะะพะฝัะธะณััะฐัะธั
โ   โ   โโโ SimulationRunner.java  # ๐ ะะฐะฟััะบ ัะธะผัะปััะธะธ
โ   โ   โโโ RequestGenerator.java  # ๐ฒ ะะตะฝะตัะฐัะพั ะทะฐะบะฐะทะพะฒ
โ   โ   โโโ StrategyType.java      # ๐ ะขะธะฟั ัััะฐัะตะณะธะน
โ   โโโ stats/           # ๐ ะกัะฐัะธััะธะบะฐ
โ   โ   โโโ StatisticsCollector.java # ๐ ะกะฑะพััะธะบ ััะฐัะธััะธะบะธ
โ   โ   โโโ TaxiStats.java          # ๐ ะกัะฐั. ะฟะพ ัะฐะบัะธ
โ   โ   โโโ TaxiTypeStats.java      # ๐ ะกัะฐั. ะฟะพ ัะธะฟะฐะผ
โ   โโโ util/            # ๐๏ธ ะฃัะธะปะธัั
โ       โโโ FareCalculator.java     # ๐ฐ ะะฐะปัะบัะปััะพั ััะพะธะผะพััะธ
โโโ bin/                 # ๐ฆ ะกะบะพะผะฟะธะปะธัะพะฒะฐะฝะฝัะต ะบะปะฐััั
โโโ compile.bat         # ๐ช ะะพะผะฟะธะปััะธั (Windows)
โโโ compile.sh          # ๐ง ะะพะผะฟะธะปััะธั (Linux/macOS)
โโโ README.md           # ๐ ะะพะบัะผะตะฝัะฐัะธั
```

### ๐ ะะะ ะะะะะขะะะข ะะะะะะะะะ
๐ ะะะะฃะกะ โ Main.java ัะธัะฐะตั ะฟะฐัะฐะผะตััั

๐๏ธ ะะะะฆะะะะะะะฆะะฏ โ ัะพะทะดะฐัััั ะฒัะต ะบะพะผะฟะพะฝะตะฝัั

๐ท ะะะะฃะกะ ะะะขะะะะ โ ัะฐะบัะธ, ะดะธัะฟะตััะตั, ะณะตะฝะตัะฐัะพั

๐ฒ ะะะะะะะฆะะฏ ะะะะะะะ โ RequestGenerator ัะพะทะดะฐะตั ะทะฐะฟัะพัั

๐ฏ ะะะกะะะะะะะะะะ โ Dispatcher ะฒัะฑะธัะฐะตั ัะฐะบัะธ ัะตัะตะท ัััะฐัะตะณะธั

๐ ะะซะะะะะะะะ ะะะะะะะ โ TaxiWorker ะธะผะธัะธััะตั ะดะฒะธะถะตะฝะธะต

๐ ะกะะะ ะกะขะะขะะกะขะะะ โ StatisticsCollector ะทะฐะฟะธััะฒะฐะตั ะดะฐะฝะฝัะต

๐ ะะะะะะะขะะะฏ ะะกะขะะะะะะ โ poison pills ะธ graceful shutdown

๐ ะะซะะะ ะะขะงะะขะ โ ะฟะพะดัะพะฑะฝะฐั ััะฐัะธััะธะบะฐ ะฟะพ ัะฐะฑะพัะต

## ๐ ะะซะกะขะะซะ ะกะขะะะข
### ๐ช WINDOWS
```cmd
# 1. ะะพะผะฟะธะปััะธั
compile.bat

# 2. ะะฐะฟััะบ ั ะธะฝัะตัะฐะบัะธะฒะฝัะผ ะฒะฒะพะดะพะผ
java -cp "bin" Main

# 3. ะะฐะฟััะบ ั ะฟะฐัะฐะผะตััะฐะผะธ
java -cp "bin" Main 5 30 2000 nearest
```
### ๐ง LINUX/MACOS
```bash
# 1. ะะฐะตะผ ะฟัะฐะฒะฐ ะฝะฐ ะฒัะฟะพะปะฝะตะฝะธะต
chmod +x compile.sh run.sh run_with_args.sh

# 2. ะะพะผะฟะธะปััะธั
./compile.sh

# 3. ะะฐะฟััะบ ั ะธะฝัะตัะฐะบัะธะฒะฝัะผ ะฒะฒะพะดะพะผ
java -cp "bin" Main

# 4. ะะฐะฟััะบ ั ะฟะฐัะฐะผะตััะฐะผะธ
java -cp "bin" Main 5 30 2000 nearest
```
## โ๏ธ ะะะะะะะขะะซ ะกะะะฃะะฏะฆะะ
### ๐ ะะกะะะะะซะ ะะะะะะะขะะซ
| ะะฐัะฐะผะตัั | ะะฟะธัะฐะฝะธะต |	ะะพ ัะผะพะปัะฐะฝะธั | ะะธะฐะฟะฐะทะพะฝ |
|----------|----------|--------------|----------|
| **ะะพะปะธัะตััะฒะพ ัะฐะบัะธ** | ะกะบะพะปัะบะพ ัะฐะบัะธ ะฒ ะฟะฐัะบะต | 5 | 1-50 |
| **ะะปะธัะตะปัะฝะพััั** | ะัะตะผั ัะฐะฑะพัั ัะธะผัะปััะธะธ | 30 ัะตะบ | 5-300 ัะตะบ |
| **ะะฝัะตัะฒะฐะป ะทะฐะบะฐะทะพะฒ** | ะกัะตะดะฝะตะต ะฒัะตะผั ะผะตะถะดั ะทะฐะบะฐะทะฐะผะธ | 2000 ะผั | 500-10000 ะผั |
| **ะกััะฐัะตะณะธั** | ะะปะณะพัะธัะผ ัะฐัะฟัะตะดะตะปะตะฝะธั | nearest | nearest/leastloaded |
### ๐ฏ ะกะขะะะขะะะะ ะะะกะะะะะะะะะะฏ
**1. ๐บ๏ธ NEAREST (ะฑะปะธะถะฐะนัะตะต ัะฐะบัะธ)**

* ะัะฑะธัะฐะตั ัะฒะพะฑะพะดะฝะพะต ัะฐะบัะธ, ะฑะปะธะถะฐะนัะตะต ะบ ะบะปะธะตะฝัั

* โ ะะธะฝะธะผะธะทะธััะตั ะฒัะตะผั ะพะถะธะดะฐะฝะธั

* โ๏ธ ะะพะถะตั ะฝะตัะฐะฒะฝะพะผะตัะฝะพ ะทะฐะณััะถะฐัั ัะฐะบัะธ

**2. โ๏ธ LEAST LOADED (ะฝะฐะธะผะตะฝะตะต ะทะฐะณััะถะตะฝะฝะพะต)**

* ะัะฑะธัะฐะตั ัะฐะบัะธ ั ะฝะฐะธะผะตะฝััะธะผ ะบะพะปะธัะตััะฒะพะผ ะฒัะฟะพะปะฝะตะฝะฝัั ะฟะพะตะทะดะพะบ

* โ ะะฐะปะฐะฝัะธััะตั ะฝะฐะณััะทะบั

* โ๏ธ ะะปะธะตะฝั ะผะพะถะตั ะถะดะฐัั ะดะพะปััะต

### ๐ ะขะะะซ ะขะะะกะ ะ ะขะะะะคะซ
| ะขะธะฟ | ะะฐะทะพะฒะฐั ััะพะธะผะพััั | ะกัะพะธะผะพััั ะทะฐ ะบะผ | ะะฟะธัะฐะฝะธะต |
|-----|-------------------|-----------------|----------|
| **ECONOMY** ๐ข | 50 ััะฑ | 10 ััะฑ/ะบะผ | ะัะดะถะตัะฝัะน ะฒะฐัะธะฐะฝั |
| **COMFORT** ๐ก | 100 ััะฑ | 15 ััะฑ/ะบะผ | ะกัะฐะฝะดะฐััะฝัะน ะบะพะผัะพัั |
| **BUSINESS** ๐ด | 200 ััะฑ | 25 ััะฑ/ะบะผ | ะัะตะผะธัะผ-ะบะปะฐัั |

## ๐ ะะซะฅะะะะซะ ะะะะะซะ ะ ะกะขะะขะะกะขะะะ
### ๐ฅ๏ธ ะงะขะ ะะะะะข ะะะะฌะะะะะขะะะฌ ะะ ะะะะะฏ ะะะะะขะซ:
```text
============================================================
    ะกะะกะขะะะ ะฃะะะะะะะะะฏ ะะะกะะะะะขะะซะะ ะขะะะกะ
============================================================

[ะะะกะขะะะะะ] โ ะทะฐะฟัะพั ะฟะฐัะฐะผะตััะพะฒ
[ะะะะฆะะะะะะะฆะะฏ] โ ัะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะพะฒ
[ะะะะฃะกะ ะะะขะะะะ] โ ะทะฐะฟััะบ ะฒัะตั ัะฐะฑะพัะธั ะฟะพัะพะบะพะฒ
[ะะะะะขะ] โ ะปะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ:
  โข ะกะณะตะฝะตัะธัะพะฒะฐะฝ ะทะฐะบะฐะท #X ะพั (x,y) ะดะพ (x,y)
  โข ะะฐะบะฐะท #X ะฝะฐะทะฝะฐัะตะฝ ัะฐะบัะธ Y
  โข ะขะฐะบัะธ Y ะตะดะตั ะบ ะบะปะธะตะฝัั #X
  โข ะขะฐะบัะธ Y ะทะฐะฒะตััะธะปะพ ะฟะพะตะทะดะบั #X
[ะะกะขะะะะะะ] โ ะบะพััะตะบัะฝะพะต ะทะฐะฒะตััะตะฝะธะต ะฟะพัะพะบะพะฒ
[ะะขะงะะข] โ ะฟะพะปะฝะฐั ััะฐัะธััะธะบะฐ
```
### ๐ ะคะะะะะฌะะซะ ะะขะงะะข ะกะะะะะะะข:
```text
============================================================
ะะขะงะะข ะะ ะกะขะะขะะกะขะะะ ะกะะะฃะะฏะฆะะ
============================================================

ะะะฉะะฏ ะกะขะะขะะกะขะะะ:
โข ะัะตะณะพ ะฒัะฟะพะปะฝะตะฝะพ ะฟะพะตะทะดะพะบ: 15
โข ะะฑัะธะน ะฟัะพะฑะตะณ: 845.32 ะบะผ
โข ะะฑัะฐั ะฒััััะบะฐ: 12,543.45 ััะฑ
โข ะกัะตะดะฝะตะต ะฒัะตะผั ะพะถะธะดะฐะฝะธั: 3.2 ัะตะบ
โข ะกัะตะดะฝะตะต ะฒัะตะผั ะฟะพะตะทะดะบะธ: 15.8 ัะตะบ

ะกะขะะขะะกะขะะะ ะะ ะขะะะะ ะขะะะกะ:
โข ECONOMY: 5 ะฟะพะตะทะดะพะบ, 2,543.21 ััะฑ
โข COMFORT: 6 ะฟะพะตะทะดะพะบ, 4,876.54 ััะฑ  
โข BUSINESS: 4 ะฟะพะตะทะดะพะบ, 5,123.70 ััะฑ

ะกะขะะขะะกะขะะะ ะะ ะะะะะะะฃ ะขะะะกะ:
ID | ะขะธะฟ      | ะะพะตะทะดะบะธ | ะัะพะฑะตะณ | ะััััะบะฐ | ะกั. ะพะถะธะดะฐะฝะธะต
---|----------|---------|--------|---------|-------------
1  | ECONOMY  | 3       | 156.32 | 1,432.10 | 2.8ั
2  | COMFORT  | 2       | 189.45 | 1,567.89 | 3.1ั
3  | BUSINESS | 4       | 245.67 | 3,456.78 | 1.9ั
```

## ๐ฎ ะะะะะะะซ ะะกะะะะฌะะะะะะะฏ
### ๐งช ะะซะกะขะะซะ ะขะะกะข (30 ัะตะบัะฝะด)
```bash
java -cp "bin" Main 3 30 1000 nearest
```
### ๐ ะกะะะะะะะะ ะกะขะะะขะะะะ
```bash
# ะกััะฐัะตะณะธั "ะฑะปะธะถะฐะนัะตะต ัะฐะบัะธ"
java -cp "bin" Main 5 60 2000 nearest

# ะกััะฐัะตะณะธั "ะฝะฐะธะผะตะฝะตะต ะทะฐะณััะถะตะฝะฝะพะต"  
java -cp "bin" Main 5 60 2000 leastloaded
```
### ๐ข ะะะะฌะจะะ ะะะะ ะขะะะกะ
```bash
java -cp "bin" Main 15 120 1000 nearest
```
### ๐ฐ ะขะะกะขะะะะะะะะ ะขะะะะคะะ
```bash
# ะะฝะพะณะพ ะดะพัะพะณะธั ะทะฐะบะฐะทะพะฒ
java -cp "bin" Main 8 45 1500 nearest
```
## ๐ง ะขะะฅะะะงะะกะะะ ะะะขะะะ
### ๐งต ะะะะะะะะขะะงะะะกะขะฌ
* **TaxiWorker** โ ะบะฐะถะดัะน ะฒ ะพัะดะตะปัะฝะพะผ ะฟะพัะพะบะต

* **Dispatcher** โ ะพัะดะตะปัะฝัะน ะฟะพัะพะบ ัะฐัะฟัะตะดะตะปะตะฝะธั

* **RequestGenerator** โ ะพัะดะตะปัะฝัะน ะฟะพัะพะบ ะณะตะฝะตัะฐัะธะธ

* **BlockingQueue** โ ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะต ะพัะตัะตะดะธ

* **ReentrantLock** โ ัะธะฝััะพะฝะธะทะฐัะธั ะฒัะฑะพัะฐ ัะฐะบัะธ

* **Atomic*** โ ะฟะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะต ััะตััะธะบะธ ััะฐัะธััะธะบะธ

### ๐ก๏ธ ะกะะะฅะะะะะะะฆะะฏ ะ ะะะะะะะกะะะกะขะฌ
* โ ะะตั race conditions

* โ ะะตั deadlocks

* โ ะะพััะตะบัะฝะพะต ะทะฐะฒะตััะตะฝะธะต ะฟะพัะพะบะพะฒ

* โ ะะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะต ะบะพะปะปะตะบัะธะธ ะธะท java.util.concurrent

* โ Atomic ัะธะฟั ะดะปั ััะฐัะธััะธะบะธ

### ๐ฆ ะะกะะะะฌะะฃะะะซะ ะขะะฅะะะะะะะ
* Java 8+

* ะะฝะพะณะพะฟะพัะพัะฝะพััั (Thread, Runnable, ExecutorService)

* ะะปะพะบะธััััะธะต ะพัะตัะตะดะธ (BlockingQueue)

* ะะฐััะตัะฝั ะฟัะพะตะบัะธัะพะฒะฐะฝะธั (Strategy, Callback, Worker)

* ะะพัะพะบะพะฑะตะทะพะฟะฐัะฝัะต ะบะพะปะปะตะบัะธะธ
---
*ะะฐะทัะฐะฑะพัะฐะฝะพ ะฒ ัะฐะผะบะฐั ะปะฐะฑะพัะฐัะพัะฝะพะน ัะฐะฑะพัั ะฟะพ Java*